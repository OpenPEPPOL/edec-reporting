# This file is auto generated

title: Rules
description: These are rules that apply to End User Reporting.
namespace:
  ext: urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2
  cbc: urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2
  cac: urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2
  qdt: urn:oasis:names:specification:ubl:schema:xsd:QualifiedDataTypes-2
  udt: urn:oasis:names:specification:ubl:schema:xsd:UnqualifiedDataTypes-2
  cn: urn:oasis:names:specification:ubl:schema:xsd:CreditNote-2
  ubl: urn:oasis:names:specification:ubl:schema:xsd:Invoice-2
  u: utils

pattern:
- id: UBL-model
  rule:
  - context: "/ubl:Invoice[cac:AccountingSupplierParty/cac:Party/cac:PostalAddress/cac:Country/cbc:IdentificationCode = 'JP' ]/cac:AccountingSupplierParty/cac:Party/cac:PartyTaxScheme[cac:TaxScheme/normalize-space(upper-case(cbc:ID))='VAT']"
    assert:
    - id: jp-br-01
      flag: fatal
      test: matches(normalize-space(cbc:CompanyID),'^T[0-9]{13}$')
      message: "[jp-br-01]-From October 1st2023, Seller Tax identifier (ibt-031) shall be coded by using a Registration number for Qualified Invoice in Japan, which consists of 14 digits that starts with T."

  - context: cac:TaxCategory/cac:TaxScheme/cbc:ID | cac:ClassifiedTaxCategory/cac:TaxScheme/cbc:ID
    assert:
    - id: jp-br-03
      flag: fatal
      test: matches(normalize-space(.),'VAT')
      message: "[jp-br-03]-Tax scheme (ibt-118-1) shall use VAT from UNECE 5153 code list. VAT means Consumption Tax in Japan."
